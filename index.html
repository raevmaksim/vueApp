<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/font-awesome.min.css">
  <link rel="stylesheet" href="css/style.css">
  <title>Моя раса в SrarCraft 2</title>
</head>
<body>
  <div class="main">


    <div class="app" v-show="showMain">
      <div class="app__header">
        <img src="img/logo.png" alt="Logo" class="app__logo">
      </div>
      <div class="app__body">
        <button class="app__btn" @click="goToQuestions">
          <i class="fa fa-play-circle-o" aria-hidden="true"></i>
          <div class="app__btn-text">
            Начать
          </div>
        </button>
        <button class="app__btn" @click="goToAchivments">
          <i class="fa fa-trophy" aria-hidden="true"></i>
          <div class="app__btn-text">
            Достижения
          </div>
        </button>
        <button class="app__btn" @click="goToSocial">
          <i class="fa fa-user" aria-hidden="true"></i>
          <div class="app__btn-text">
            Автор
          </div>
        </button>
        <button class="app__btn btn__sound">
          <i class="fa fa-volume-up" aria-hidden="true"></i>"
          <div class="app__btn-text">
            Звук
          </div>
        </button>
      </div>
    </div>

    <!-- Achivments -->

    <div class="app achivments" v-show="showAchivments">
      <div class="app__body">
        <div class="app__body-inner">
          <h2 class="app__body-title">
            <i class="fa fa-trophy" aria-hidden="true"></i>
            Достижения
          </h2>
          <div class="app__body-top">
            <div class="app__card">
              <div class="app__card-text">Счет</div>
              <div class="app__card-count">0</div>
            </div>
            <div class="app__card">
              <div class="app__card-text">Откпыто раз</div>
              <div class="app__card-count">0</div>
            </div>
            <div class="app__card">
              <div class="app__card-text">Всего игр</div>
              <div class="app__card-count">0</div>
            </div>
            <div class="app__card">
              <div class="app__card-text">Любимая раса</div>
              <div class="app__card-count">0</div>
            </div>
          </div>
          <div class="app__body-middle">
            <div class="app__result">
              <div class="app__result-score">
                <i class="fa fa-star" aria-hidden="true"></i>
                <div class="app__result-count">150</div>
              </div>
              <div class="app__result-name">Zerg</div>
              <div class="app__result-amount">5</div>
            </div>
          </div>
          <div class="app__body-bottom">
            <button class="app__btn btn__back btn__achivment" @click="goToMain">
              <i class="fa fa-reply" aria-hidden="true"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Questions -->
  
    <div class="app" v-show="showQuestions">
      <div class="app__header">
        <div class="app__header-inner">
          <div class="app__count"># {{ number+1 }}</div>
          <div class="app__text">{{ questions[number][0] }}</div>
        </div>
      </div>
      <div class="app__body">
        <button class="app__btn"
        v-for="(answer, i) in questions[number][1]"
        @click="nextQuestions(questions[number][2][i])">
          <div class="app__btn-text">
            {{ answer }}
          </div>
        </button>
      </div>
    </div>    

  <!-- Social -->

    <div class="app" v-show="showSocial">
      <div class="app__body">
        <a href="#" class="app__btn"><i class="fa fa-instagram" aria-hidden="true"></i>
          Instagram</a>
        <a href="#" class="app__btn"><i class="fa fa-twitter" aria-hidden="true"></i>
          Twitter</a>
        <a href="#" class="app__btn"><i class="fa fa-facebook" aria-hidden="true"></i>
          Fcebook</a>
        <a href="#" class="app__btn"><i class="fa fa-vk" aria-hidden="true"></i>
          Vkontakte</a>
        <a href="#" class="app__btn"><i class="fa fa-youtube-play" aria-hidden="true"></i>
          Youtube</a>
        <button class="app__btn btn__back" @click="goToMain">
          <i class="fa fa-reply" aria-hidden="true"></i>
        </button>
      </div>
    </div>
  

  <!-- Results -->

  <div class="app results" v-show="showResult" :data-race="resultRace">
    <div class="app__body">
      <div class="app__results-inner">
        <div class="results__title">{{ results[resultRace].name }}</div>
        <div class="results__img"><img :src="'img/'+resultRace+'_logo.png'"></div>
        <div class="results__text-box">
          <p class="result__text">{{ results[resultRace].description }}</p>
          <p class="result__quote">{{ results[resultRace].quote1 }}</p>
          <p class="result__quote">{{ results[resultRace].quote2 }}</p>
          <p class="result__author">{{ results[resultRace].author }}</p>
        </div>
        <div>
          <button :class="'app__btn btn__back btn__'+resultRace" @click="goToAchivments">
            <i class="fa fa-reply" aria-hidden="true"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
  <script src="js/vue.js"></script>
  <script src="js/const.js"></script>

  <script>
    let app = new Vue({
      el: '.main',
      data: {
        showMain: true,
        showSocial: false,
        showAchivments: false,
        showQuestions: false,
        showResult: false,
        number: 0,
        score: {
          'zerg': 0,
          'primal': 0,
          'protoss': 0,
          'taldarim': 0,
          'terran': 0,
        },
        totalGame: localStorage.getItem('sc2TotalGame') ? JSON.parse(localStorage.getItem('sc2TotalGame')) : {
          'zerg': 0,
          'primal': 0,
          'protoss': 0,
          'taldarim': 0,
          'terran': 0,
          'infested': 0,
          'hybrid': 0,
        },
        totalGames: localStorage.getItem('sc2TotalGames') ? localStorage.getItem('sc2TotalGames') : 0,
        questions: questions,
        results: results,
        resultRace: 'infested',
      },
      methods: {
        goToMain() {
          this.showMain = true
          this.showSocial = false
          this.showAchivments = false
          this.showQuestions = false
          this.showResult = false
        },
        goToSocial() {
          this.showMain = false
          this.showSocial = true
          this.showAchivments = false
          this.showQuestions = false
          this.showResult = false
        },
        goToAchivments() {
          if (this.totalGames > 0) {
            this.showMain = false
            this.showSocial = false
            this.showAchivments = true
            this.showQuestions = false
            this.showResult = false
          } else {
            this.goToQuestions()
          }          
        },
        goToQuestions() {
          this.score = {
          'zerg': 0,
          'primal': 0,
          'protoss': 0,
          'taldarim': 0,
          'terran': 0,
          }
          this.showMain = false
          this.showSocial = false
          this.showAchivments = false
          this.showQuestions = true
          this.showResult = false
        },
        goToResult(race) {
          this.showMain = false
          this.showSocial = false
          this.showAchivments = false
          this.showQuestions = false
          this.showResult = true
          this.resultRace = race
        },
        nextQuestions(answer) {
          if (this.number == 24) {
            this.number = 0
            this.endGame();
          } else {
            this.number++
          }
          eval(answer);
        },
        endGame() {
          this.totalGames++
          localStorage.setItem('sc2TotalGames', this.totalGames)
          //Zerg
          if(this.score.zerg > this.score.protoss && this.score.zerg > this.score.terran && this.score.primal < 8 && Math.abs(this.score.protoss - this.score.zerg) > 3) {
            this.goToResult('zerg')
            this.totalGame.zerg++
          } 
          //Изначальный
          else if(this.score.primal > this.score.protoss && this.score.primal > this.score.terran && this.score.primal == 8) {
            this.goToResult('primal')
            this.totalGame.primal++
          }
          //Protoss
          else if(this.score.protoss > this.score.zerg && this.score.protoss > this.score.terran && this.score.taldarim < 5 && Math.abs(this.score.protoss - this.score.zerg) > 3) {
            this.goToResult('protoss')
            this.totalGame.protoss++
          }
          //Taldarim
          else if(this.score.protoss > this.score.zerg && this.score.protoss > this.score.terran && this.score.taldarim == 5) {
            this.goToResult('taldarim')
            this.totalGame.taldarim++
          }
          //Terran
          else if(this.score.terran > this.score.zerg && this.score.terran > this.score.protoss) {
            this.goToResult('terran')
            this.totalGame.terran++
          }
          //Hybrid
          else if(Math.abs(this.score.protoss - this.score.zerg) <= 3) {
            this.goToResult('hybrid')
            this.totalGame.hybrid++
          }
          //Infested
          else {
            this.goToResult('infested')
            this.totalGame.infested++
          }
          localStorage.setItem('sc2TotalGame', JSON.stringify(this.totalGame))
        },
      }

    })
  </script>
</body>
</html>